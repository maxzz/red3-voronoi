var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,a=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n;import{r as c,p as i,R as s,u as p,s as u,L as m,a as d,b as f}from"./vendor.db3acc58.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const g=()=>{const e=c.exports.useRef(null);return c.exports.useEffect((()=>{e.current&&(i.setup(e.current),(()=>{let e=new i.Path;i.view.onMouseDown=t=>{e.strokeColor=new i.Color("white"),e.strokeWidth=3},i.view.onMouseUp=t=>{e.simplify(10),e.selected=!0},i.view.onMouseDrag=t=>{e.add(t.point)}})())}),[]),s.createElement("div",null,s.createElement("canvas",{width:300,height:300,ref:e,className:"bg-pink-300"},"B"))};const y=()=>{const e=s.useRef(null),[c,i]=s.useState([]),m=p((t=>{if("pointerdown"===t.event.type&&console.log("pointerdown",t),t.dragging){console.log("drag",t);let r=function(e,t){var r;if(void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(null==(r=t.getScreenCTM())?void 0:r.inverse())).x,o.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[e.clientX-l.left-t.clientLeft,e.clientY-l.top-t.clientTop]}}return[e.pageX,e.pageY]}(t.event,e.current);i((e=>[...e,r]))}"pointerup"===t.event.type&&console.log("up",t)}));return s.createElement("div",null,s.createElement("svg",(d=((e,t)=>{for(var r in t||(t={}))o.call(t,r)&&a(e,r,t[r]);if(n)for(var r of n(t))l.call(t,r)&&a(e,r,t[r]);return e})({ref:e},m()),t(d,r({width:500,height:500,className:"bg-purple-300"}))),s.createElement("path",{fill:"none",stroke:"red",d:(console.log("points",c),c.length>1?(console.log("points after",u(c)),u(c)):"")}),c.map(((e,t)=>s.createElement("circle",{cx:e[0],cy:e[1],r:3,key:t,fill:"none",stroke:"blue"})))));var d};function b(){return s.createElement("div",{className:"h-screen flex flex-col bg-purple-200"},s.createElement("header",{className:"flex-none bg-gray-200 p-2"},s.createElement("div",{className:""},s.createElement("ul",{className:"space-x-2 flex items-center"},s.createElement("li",{className:""},s.createElement(m,{className:"block p-2 rounded bg-gray-50 border border-gray-400 shadow",to:"simplify-react"},"Simplify: React")),s.createElement("li",{className:""},s.createElement(m,{className:"block p-2 rounded bg-gray-50 border border-gray-400 shadow",to:"simplify-paper"},"Simplify: Parer"))))),s.createElement(d,{className:"flex-1 bg-green-400"},s.createElement(y,{path:"simplify-react"}),s.createElement(g,{path:"simplify-paper"})))}f.render(s.createElement(s.StrictMode,null,s.createElement(b,null)),document.getElementById("root"));
